# Railway (Nixpacks) : forcer l'installation des dépendances Python dans le venv utilisé au runtime.
# Sans ce fichier, le build peut ne pas installer requirements.txt quand Root Directory = backend.

[phases.setup]
nixPkgs = ["python312", "pip"]

[phases.install]
cmds = ["pip install --upgrade pip", "pip install -r requirements.txt"]

[phases.build]
cmds = []

[start]
# Migrations puis Gunicorn (inline = pas de souci CRLF). load_demo_data : une fois via railway run ou SSH.
cmd = "python manage.py collectstatic --noinput && python manage.py migrate --noinput && exec gunicorn config.wsgi --bind 0.0.0.0:$PORT"
