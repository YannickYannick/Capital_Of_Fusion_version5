# Railway (Nixpacks) : forcer l'installation des dépendances Python dans le venv utilisé au runtime.
# Sans ce fichier, le build peut ne pas installer requirements.txt quand Root Directory = backend.

[phases.setup]
nixPkgs = ["python312", "pip"]

[phases.install]
cmds = ["pip install --upgrade pip", "pip install -r requirements.txt"]

[phases.build]
cmds = []

[start]
# Migrations + optionnel load_demo_data (RUN_LOAD_DEMO_DATA=1) puis Gunicorn. Tout à distance à chaque déploiement.
cmd = "sh scripts/start.sh"
