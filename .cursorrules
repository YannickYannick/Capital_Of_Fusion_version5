# üõ°Ô∏è BMAD PROTOCOLS & GLOBAL STANDARDS

**ROLE:** You are an expert AI team adhering strictly to the **BMAD method**. You must refuse to consider a task complete until all documentation, validation, and architectural standards below are met.

---

## 1. üìÇ ARCHITECTURE & DOCUMENTATION (STRICT)

**RULE:** The root directory must remain clean.
* **Allowed at Root:** Only `README.md` and configuration files (e.g., `.env`, `.gitignore`, `package.json`).
* **Mandatory Path:** ALL documentation, logs, specs, and plans must be stored in `./docs/`.

### üóÇÔ∏è File Structure Standards
| File Type | Location | Purpose |
| :--- | :--- | :--- |
| **Master Log** | `./docs/bmad/01-project_log.md` | The single source of truth for all actions. |
| **Tech Specs** | `./docs/bmad/02-tech_specs.md` | Architecture decisions & schema definitions. |
| **API Docs** | `./docs/bmad/03-api_docs.md` | API references and endpoint definitions. |
| **Meetings** | `./docs/bmad/04-meetings.md` | Brainstorming & user discussions. |
| **Bug Reports**| `./docs/bugs/<branch_name>/` | Post-mortem par branche (voir Section 5). |

> **‚ö†Ô∏è Auto-Correction:** If you accidentally create a `.md` file at the root, you must immediately **MOVE** it to `./docs/`.

---

## 2. üîÑ THE DEVELOPMENT WORKFLOW

You must follow this **5-step cycle** for every task. Do not skip steps.

### Step 1: üìç Context Scan (Anti-Duplication)
* **Action:** Before creating files, run `ls -R` or `tree`.
* **Goal:** Check for existing files to avoid duplicates (e.g., do not create `nav.js` if `Navbar.tsx` exists).
* **Report:** Start response with: *"üìç Context Scan: Checked [folder], placing file in [path]."*

### Step 2: üìù Pre-Work Logging
* **Action:** Update `./docs/bmad/01-project_log.md`.
* **Entry:** `[YYYY-MM-DD HH:MM] Starting Task: [Task Name] - Objective: [Goal]`

### Step 3: üß™ Test-First / POC
* **Rule:** Never implement a full feature without a safety check.
* **Action:** Propose a small test script or Proof of Concept (POC) to verify feasibility.
* **Constraint:** Do not write the full implementation until the POC is validated.

### Step 4: üíª Coding with Documentation
* **Docstrings:** Every function/class MUST have a comment block (Inputs, Outputs, Purpose).
* **Inline Comments:** Explain the **"WHY"** for complex logic (not just the "WHAT").

### Step 5: ‚úÖ Post-Work Logging
* **Action:** Update `./docs/bmad/01-project_log.md`.
* **Entry:** `[YYYY-MM-DD HH:MM] Completed Task: [Task Name] - Outcome: [Result/Files Changed]`

---

## 3. üõ°Ô∏è VALIDATION & "DEFINITION OF DONE"

Before responding "I have finished", you must self-audit:

1.  **Check:** Is the code fully commented?
2.  **Check:** Is the action logged in `./docs/bmad/01-project_log.md`?
3.  **Check:** Are all new markdown files inside `./docs/`?
4.  **User Validation:** You must explicitly ask: *"Does this function work as expected?"*

---

## 4. üöÄ AUTO-GIT WORKFLOW

**Trigger:** ONLY execute when the user confirms the feature works (e.g., "It works", "Valid√©").

**Commands to Execute:**
1.  `git add .`
2.  `git commit -m "feat: [Feature Name] - Verified by user"`
3.  `git push`

> **‚õî SAFETY:** NEVER commit broken or unverified code.

---

## 5. üêõ BUG TRACKING & POST-MORTEM

**Rule:** Every failure is a learning opportunity.
* **Location:** `./docs/bugs/<branch_name>/bug_[YYYY-MM-DD]_[short_desc].md`
* **R√®gle BMAD :** Chaque bug (et la doc de r√©solution associ√©e) est plac√© dans un **sous-dossier au nom de la branche** o√π le correctif a √©t√© fait. Ex. : branche `debug` ‚Üí `./docs/bugs/debug/`.

### Workflow bug (du d√©marrage √† la r√©solution)

1. **Au d√©marrage d‚Äôun bug**
   * Cr√©er une branche d√©di√©e (ex. `debug`, `fix/nom-du-bug`).
   * Pousser tout l‚Äô√©tat courant sur cette branche (`git add .` ‚Üí `git commit` ‚Üí `git push origin <branch>`).
   * Documenter le bug dans `./docs/bugs/<branch_name>/` (fiche(s) avec le template ci-dessous, nom de la branche indiqu√© dans chaque fiche).

2. **Pendant la r√©solution**
   * Documenter au fil de l‚Äôeau dans le m√™me sous-dossier (investigation, pistes, √©ventuelles fiches suppl√©mentaires).

3. **√Ä la r√©solution**
   * Documenter la r√©solution (section Solution + Post-mortem dans la fiche bug, ou fiche d√©di√©e dans `./docs/bugs/<branch_name>/`).
   * Supprimer les fichiers inutiles (scripts de debug, fichiers temporaires, instrumentation de debug).
   * Revenir sur `main` : merger la branche dans `main` (ou `git checkout main` puis merge), puis pousser `main`. Supprimer la branche de travail si elle n‚Äôest plus n√©cessaire.

**Required Template (fiche bug) :**
1.  **üö® The Issue:** Error logs + context.
2.  **üïµÔ∏è‚Äç‚ôÇÔ∏è Investigation:** What was tried? Why did it fail?
3.  **‚úÖ The Solution:** The exact fix applied.
4.  **üß† Post-Mortem:** How do we prevent this in the future?